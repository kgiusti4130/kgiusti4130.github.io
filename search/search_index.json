{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Home","text":"<p>For full documentation visit mkdocs.org.</p>"},{"location":"#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> <li><code>sample</code> - Just a sample line</li> <li><code>sample2</code> - Just a sample line2</li> </ul>"},{"location":"#project-layout","title":"Project layout","text":"<pre><code>mkdocs.yml    # The configuration file.\ndocs/\n    index.md  # The documentation homepage.\n    ...       # Other markdown pages, images and other files.\n</code></pre>"},{"location":"#arista-tips-and-notes","title":"Arista tips and notes","text":""},{"location":"#listing-out-code","title":"Listing out code","text":"<pre><code>ls -l intended/configs\ntotal 428\n-rw-rw-r-- 1 avd avd 15168 May 31 18:51 1-sw-arista720XP-42-a.cfg\n-rw-rw-r-- 1 avd avd 15168 May 31 18:52 1-sw-arista720XP-42-b.cfg\n-rw-rw-r-- 1 avd avd 14653 Jun  1 18:35 1-sw-arista720XP-42-c.cfg\n-rw-rw-r-- 1 avd avd 15168 May 31 18:52 1-sw-arista720XP-43-a.cfg\n</code></pre> <p>Just a way to bring attention and also give annotations (1)</p> <p>This is a simple paragraph with some notes, (2) This is just more info that can be written into the box.</p> <ol> <li> I\u2019m an annotation!</li> <li> I\u2019m an annotation as well!</li> </ol>"},{"location":"#workflow-for-brining-idf-online","title":"Workflow for brining IDF online.","text":"<ol> <li>Build configs in AVD via build.yml playbook.</li> <li>ZTP configs to switch.</li> <li>Get switches online.</li> <li>Use build.yml playbook to push any changes to switches that have happened since they have been powered off.</li> <li>SCP certificate to switches in order to connect to CVP.</li> <li>Verify switch shows up in CVP. Make sure switch is \u201cprovisioned\u201d.</li> <li>Run cvp_deploy.yml to create container structure, move switch(es) to container and push tasks if there are any.</li> </ol>"},{"location":"#create-a-chart","title":"Create a chart","text":""},{"location":"#mpls-core-with-mpls-evpn-vpn-ipv4-vpn-ipv6","title":"MPLS Core with MPLS EVPN, VPN-IPv4, VPN-IPv6","text":"Underlay Overlay Topology ISIS-SR iBGP Arbitrary Mesh or leaf-spine ISIS-SR + LDP iBGP Arbitrary Mesh or leaf-spine ISIS + LDP iBGP Arbitrary Mesh or leaf-spine OSPF + LDP iBGP Arbitrary Mesh or leaf-spine <p>Tip</p> <p>Some info that is useful can be written here.</p>"},{"location":"#known-limitations","title":"Known limitations","text":"<p>Warning</p> <p>Input data and \u201cstructured_configs\u201d will be in-place updated by various PyAVD functions. Make sure to deep copy the data first if modifications are not allowed.</p>"},{"location":"#roadmap","title":"Roadmap","text":"<p>Note</p> <p>Subject to change. No commitments implied.</p>"},{"location":"#create-a-list","title":"Create a list","text":"<ul> <li>Add examples</li> <li>Add more tests (current coverage is 85%)</li> <li>Add network state validation similar to <code>eos_validate_state</code>.</li> <li>Add CloudVision tag integrations</li> <li>Make PyAVD the source of AVD logic and use as a dependency for the <code>arista.avd</code> Ansible collection.</li> <li>Explore support for custom Jinja2 templates.</li> </ul>"},{"location":"#more-info","title":"More info","text":"<ul> <li>General - General community discussion.</li> <li>Ideas - Ideas for new functionality that still needs to be prepared for a formal feature request.</li> <li>Q&amp;A - Request help with installing or using AVD.</li> </ul>"},{"location":"#formatting-that-can-be-useful","title":"Formatting that can be useful","text":""},{"location":"#final-info","title":"Final info","text":"<ul> <li> <p>Scopes:</p> <ul> <li><code>{{ role_name }}</code>: AVD role impacted by PR. Required for <code>Feat</code>, <code>Cut</code>, and <code>Fix</code> types</li> <li><code>plugins</code>: To use when AVD plugin is impacted by PR. Required for <code>Feat</code>, <code>Cut</code>, and <code>Fix</code> types</li> <li><code>requirements</code>: To use when using the <code>Bump</code> type and when any AVD requirement is updated</li> </ul> <p>Scopes</p> <p>The scope is optional and can be ignored safely if your PR covers an undefined scope.</p> </li> </ul>"},{"location":"#a-simple-way-of-doing-annotations","title":"A simple way of doing annotations","text":"<p>Lorem ipsum dolor sit amet, (1) consectetur adipiscing elit.</p> <ol> <li> I\u2019m an annotation! I can contain <code>code</code>, formatted     text, images, \u2026 basically anything that can be expressed in Markdown.</li> </ol> <p>Phasellus posuere in sem ut cursus (1)</p> <p>Lorem ipsum dolor sit amet, (2) consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <ol> <li> I\u2019m an annotation!</li> <li> I\u2019m an annotation as well!</li> </ol>"},{"location":"#another-way-of-doing-annotations-with-tabs","title":"Another way of doing annotations with tabs","text":"Tab 1Tab 2 <p>Lorem ipsum dolor sit amet, (1) consectetur adipiscing elit.</p> <ol> <li> I\u2019m an annotation!</li> </ol> <p>Phasellus posuere in sem ut cursus (1)</p> <ol> <li> I\u2019m an annotation as well!</li> </ol> <pre><code># Login Banner\nbanners:\n  motd: |\n    You shall not pass. Unless you are authorized. Then you shall pass.\n    EOF\n</code></pre> Yes, that \u201cEOF\u201d is important! <p>Ensure the entire code snippet above is copied; including the <code>EOF</code>. This must be present for the configuration to be considered valid</p>"},{"location":"#create-a-drop-down-that-can-expand-with-code","title":"Create a drop down that can expand with code.","text":"<p>The <code>sites/site_1/inventory.yml</code> file should now look like the example below:</p> sites/site_1/inventory.yml <pre><code>---\nSITE1:\n  children:\n    CVP:\n      hosts:\n        cvp:\n    SITE1_FABRIC:\n      children:\n        SITE1_SPINES:\n          hosts:\n            s1-spine1:\n            s1-spine2:\n        SITE1_LEAFS:\n          hosts:\n            s1-leaf1:\n            s1-leaf2:\n            s1-leaf3:\n            s1-leaf4:\n            s1-leaf5:\n            s1-leaf6:\n    SITE1_FABRIC_SERVICES:\n      children:\n        SITE1_SPINES:\n        SITE1_LEAFS:\n    SITE1_FABRIC_PORTS:\n      children:\n        SITE1_SPINES:\n        SITE1_LEAFS:\n</code></pre>"},{"location":"#start-over-with-clean-slate","title":"Start over with clean slate","text":"<p>Previously we downloaded and created a repository called <code>samplefiles</code>. Reset this repository to a directory by removing the hidden sub-directory <code>.git</code>.  This will remove any version control settings for the repository.</p> <pre><code>cd /home/coder/project/labfiles/samplefiles\nrm -rf .git\n</code></pre>"},{"location":"#in-case-you-want-to-add-a-question","title":"In case you want to add a question","text":"Cows? <p>Yes! First, install cowsay: <code>sudo apt-get update &amp;&amp; sudo apt-get install cowsay -y</code> Next, in the <code>ansible.cfg</code> file, set it to what should be the only acceptable setting, <code>nocows = False</code>. This feature is udderly ridiculous, and as much as I\u2019d love to milk it for all the Dad jokes possible, I don\u2019t want to start any beef by delaying the workshop\u2026Moo.</p>"},{"location":"#formatting-that-we-should-be-familiar-with","title":"Formatting that we should be familiar with","text":"<p>Below is an example of the <code>ansible.cfg</code> located in our fork of the Workshops repo:</p> Example Ansible Configuration File (~/project/labfiles/ci-workshops-fundamentals/ansible/ansible.cfg) <pre><code>[defaults]\n\n# Disable host key checking by the underlying tools Ansible uses to connect to target hosts\nhost_key_checking = False\n\n# Location of inventory file containing target hosts\ninventory = ./inventory/inventory.yml\n\n# Only gather Ansible facts if explicity directed to in a given play\ngathering = explicit\n\n# Disable the creation of .retry files if a playbook fails\nretry_files_enabled = False\n\n# Path(s) to search for installed Ansible Galaxy Collections\ncollections_paths = ~/.ansible/collections\n\n# Enable additional Jinja2 Extensions (https://jinja.palletsprojects.com/en/3.1.x/extensions/)\njinja2_extensions =  jinja2.ext.loopcontrols,jinja2.ext.do,jinja2.ext.i18n\n\n# Enable the YAML callback plugin, providing much easier to read terminal output. (https://docs.ansible.com/ansible/latest/plugins/callback.html#callback-plugins)\nstdout_callback = yaml\n\n# Permit the use of callback plugins when running ad-hoc commands\nbin_ansible_callbacks = True\n\n# List of enabled callbacks. Many callbacks shipped with Ansible are not enabled by default\ncallback_whitelist = profile_roles, profile_tasks, timer\n\n# Maximum number of forks that Ansible will use to execute tasks on target hosts\nforks = 15\n\n# Disable cowsay (Why?)\nnocows = True\n\n[paramiko_connection]\n# Automatically add the keys of target hosts to known hosts\nhost_key_auto_add = True\n\n[persistent_connection]\n# Set the amount of time, in seconds, to wait for response from remote device before timing out persistent connection.\ncommand_timeout = 60\n\n# Set the amount of time, in seconds, that a persistent connection will remain idle before it is destroyed.\nconnect_timeout = 60\n</code></pre> Info <p>The <code>ansible-galaxy collection list</code> command is supported in Ansible 2.10+</p> <p>This will yield output similar to below:</p> Ansible Galaxy Collection List <pre><code># /home/coder/.ansible/collections/ansible_collections\nCollection        Version\n----------------- -------\nansible.netcommon 4.1.0\nansible.posix     1.4.0\nansible.utils     2.8.0\narista.avd        3.6.0\narista.cvp        3.4.0\narista.eos        6.0.0\ncommunity.general 6.2.0\n</code></pre>"},{"location":"#add-a-tip-with-emojis-computer-keys","title":"Add a tip with emojis &amp; computer keys!","text":"Tip <p> In VS Code, you can toggle comments on/off by selecting the text and pressing windows Ctrl + / or mac Cmd + /.</p> Tip <p>This will show the differences between the current device configuration and the configuration before we did our <code>make deploy</code> command.</p> Tip <p>Daisy chaining \u201cMakesies\u201d is a great way to run a series of tasks with a single CLI command </p>"},{"location":"#highlight-lines-of-code","title":"Highlight lines of code","text":""},{"location":"#highlight-lines-2-and-4","title":"Highlight lines 2 and 4","text":"<pre><code>def bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre>"},{"location":"#works-on-yaml-too-highlight-lines-1-3-5","title":"Works on yaml too highlight lines 1-3 &amp; 5","text":"<pre><code>l3spine:\n  defaults:\n    platform: 7020SR\n    loopback_ipv4_pool: 10.44.35.21/30\n    mlag_peer_ipv4_pool:  10.44.52.0/31\n    mlag_peer_l3_ipv4_pool: 10.44.52.2/31\n</code></pre>"},{"location":"#adding-keyboard-keys","title":"Adding keyboard keys","text":"<p>Ctrl+Alt+Del</p>"},{"location":"#add-annotations-to-inline-code","title":"Add annotations to inline code","text":"<pre><code>theme:\n  features:\n    - content.code.annotate # (1)\n</code></pre> <ol> <li> I\u2019m a code annotation! I can contain <code>code</code>, formatted     text, images, \u2026 basically anything that can be written in Markdown.</li> </ol> <pre><code>interface Ethernet1\n   no switchport # (1)\n   no shutdown # (2)\n</code></pre> <ol> <li> I\u2019m a code annotation! I can contain <code>code</code>, formatted     text, images, \u2026 basically anything that can be written in Markdown.</li> <li>Brings the port up into an operational state.</li> </ol>"},{"location":"#code-block-with-annotation-stripped","title":"code block with annotation stripped","text":"<pre><code>interface Ethernet1\n   no switchport # (1)!\n   no shutdown # (2)!\n</code></pre> <ol> <li>Look ma, less line noise!</li> <li>Nice and quiet</li> </ol>"},{"location":"#remove-copy-button-from-text-box","title":"Remove copy button from text box","text":"<pre><code>total 428\n-rw-rw-r-- 1 avd avd 15168 May 31 18:51 1-sw-arista720XP-42-a.cfg\n-rw-rw-r-- 1 avd avd 15168 May 31 18:52 1-sw-arista720XP-42-b.cfg\n-rw-rw-r-- 1 avd avd 14653 Jun  1 18:35 1-sw-arista720XP-42-c.cfg\n-rw-rw-r-- 1 avd avd 15168 May 31 18:52 1-sw-arista720XP-43-a.cfg\n</code></pre>"},{"location":"#testing-only-copy-portion-of-text-box-not-working-yet","title":"Testing only copy portion of text box (not working yet)","text":"<pre><code>Ansible Galaxy Collection List\n</code></pre> <pre><code>Collection        Version\n----------------- -------\nansible.netcommon 4.1.0\nansible.posix     1.4.0\nansible.utils     2.8.0\narista.avd        3.6.0\narista.cvp        3.4.0\narista.eos        6.0.0\ncommunity.general 6.2.0\n</code></pre>"},{"location":"arista/","title":"Arista tips and notes","text":""},{"location":"arista/#push-files-from-one-switch-to-another-via-mgmt-vrf-using-bash","title":"Push files from one switch to another via MGMT vrf using bash","text":"<pre><code>cli vrf MGMT\nbash scp /mnt/flash/EOS-4.32.5M.swi admin@10.1.252.121:/mnt/flash/\n</code></pre>"},{"location":"arista/#push-files-from-one-switch-to-another-via-mgmt-vrf-using-cli","title":"Push files from one switch to another via MGMT vrf using cli","text":"<pre><code>bash scp /mnt/flash/Pristine-EOS-4.32.5M.swi admin@10.178.7.51:/mnt/flash/EOS-4.32.5M.swi\n</code></pre> Commands to verify TerminAttr <pre><code>show version detail | grep TerminAttr-core\nshow daemon TerminAttr\nshow agent TerminAttr logs | no\n</code></pre>"},{"location":"arista/#run-multiple-watch-diff-commands-at-same-time","title":"Run multiple watch diff commands at same time","text":"<pre><code>watch 1 diff run show int status conn | nz;!;!; show lldp nei\n</code></pre>"},{"location":"arista/#commit-timer-tldr","title":"Commit Timer TLDR","text":"<pre><code>config session bgp1\n</code></pre>"},{"location":"arista/#make-config-changes","title":"Make config changes","text":"<pre><code>commit timer 00:02:00\nshow configuration sessions\nconfigure session bgp1 commit\n</code></pre>"},{"location":"bgp-builder/","title":"BGP Builder","text":""},{"location":"bgp-builder/#prerequistes","title":"Prerequistes","text":"<ul> <li>Docker Desktop</li> <li>Vscode</li> </ul>"},{"location":"bgp-builder/#steps","title":"Steps","text":"<ol> <li>Clone repository</li> <li>Once prompted reopen in container</li> <li>Edit variables in bgp_builder.yml playbook.</li> <li>Run the playbook.</li> <li>Output will be written to bgp_output.txt</li> </ol>"},{"location":"bgp-builder/#running-bgp-building-playbook","title":"Running BGP building playbook","text":"<pre><code>root@docker-desktop:/workspace# cd bgp-builder/\nroot@docker-desktop:/workspace# make bgp\n</code></pre>"},{"location":"bgp-builder/#sample-output","title":"Sample output","text":"<pre><code>root@docker-desktop:/workspace/bgp-builder# make bgp\nansible-playbook ./playbooks/bgp_builder.yml\n\nPLAY [BGP Builder Playbook] ***************************************************************************************************************************************************\n\nTASK [Generate BGP output] ****************************************************************************************************************************************************\nok: [localhost]\n\nPLAY RECAP ********************************************************************************************************************************************************************\nlocalhost                  : ok=1    changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0\n\nroot@docker-desktop:/workspace/bgp-builder#\n</code></pre>"},{"location":"bgp-builder/#folder-descriptionsinfo","title":"Folder descriptions/info","text":""},{"location":"bgp-builder/#devcontainer","title":".devcontainer","text":"<p>requirements.txt - python packages to install when container is built</p> <p>requirements.yml - Ansible Collections to install when container is built</p> <p>Dockerfile - Info to build the container</p> <p>devcontainer.json - Points to Docker Compose file and tells when extensions to install along with other required packages</p>"},{"location":"bgp-builder/#vscode","title":".vscode","text":"<p>settings.json - Color code your VScode window to avoid mixing them up with other projects.</p>"},{"location":"bgp-builder/#pre-commit","title":"Pre-commit","text":"<p>This is used to ensure code quality</p> <pre><code>root@docker-desktop:/workspace# pre-commit install\n</code></pre> <p>Once installed pre-commit to automatically run when you push to your GIT repository.</p> <p>You can also manually run it:</p> <pre><code>root@docker-desktop:/workspace/bgp-builder# pre-commit run --all\ntrim trailing whitespace.................................................Passed\nfix end of files.........................................................Passed\ncheck yaml...............................................................Passed\nCheck for Linting errors on MarkDown files...............................Passed\n</code></pre>"},{"location":"jumpstart/","title":"Jumpstart","text":""},{"location":"jumpstart/#commands","title":"Commands","text":"<ul> <li><code>mkdocs new [dir-name]</code> - Create a new project.</li> <li><code>mkdocs serve</code> - Start the live-reloading docs server.</li> <li><code>mkdocs build</code> - Build the documentation site.</li> <li><code>mkdocs -h</code> - Print help message and exit.</li> <li><code>sample</code> - Just a sample line</li> <li><code>sample2</code> - Just a sample line2</li> </ul> <p>Just a way to bring attention and also give annotations (1)</p> <p>This is a simple paragraph with some notes, (2) This is just more info that can be written into the box.</p> <ol> <li> I\u2019m an annotation!</li> <li> I\u2019m an annotation as well!</li> </ol>"}]}